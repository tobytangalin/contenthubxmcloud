<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="Audience - do not use" content=""></meta><meta name="clubot" content=""></meta><meta name="data model" content=""></meta><meta name="DxP type - Do Not Use" content=""></meta><meta name="media_icon" content=""></meta><meta name="product" content="XM Cloud"></meta><meta name="Publishing target" content="Production"></meta><meta name="Ready for publishing - do not use" content=""></meta><meta name="role" content="developers"></meta><meta name="topic_tripane" content=""></meta><meta name="version" content=""></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
					function addSearch(){
					//not used with custom or elastic search
					}
				</script><title>Using a custom Layout Service configuration with JSS</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/content-theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="/css/sitecore-custom-default-xmc.css?version=20230630"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js?version=20230630" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js?version=20230630" type="text/javascript"></script><script src="../js/html5-2.js?version=20230630" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="/js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="description" content="How to use a custom Layout Service configuration in JSS apps"></meta><link rel="prev" href="field-values-in-jss-layout-data.html#idm45599297250112" title="Editable values"></link><link rel="next" href="using-a-custom-layout-service-configuration-with-jss.html#UUID-31230fa8-224e-872a-2274-d067fea17790_section-idm4585546777748832594193701963" title="Layout Service configuration"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script><script type="text/javascript">var privacypolicy = 'https://www.sitecore.com/trust/privacy-policy';
var consenttype = 'opt-out';
</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-72664331-1"></script><script type="text/javascript">const measurementId = 'UA-72664331-1';

						$(document).on('cookies.consented', () => {
							window.dataLayer = window.dataLayer || [];
							function gtag(){dataLayer.push(arguments)};

							gtag('js', new Date());
							gtag('config', measurementId);
						});
					</script><script type="text/javascript" src="../js/cookie-consent.js"></script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script><link href="//customer.cludo.com/assets/2063/10039/cludo-search.min.css" type="text/css" rel="stylesheet"></link></head><body class="theme1 colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://doc.sitecore.com/xmc/" target="_blank" rel="noopener"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="navbar-collapse collapse" id="navbar"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside xmlns:xinfo="http://ns.expertinfo.se/cms/xmlns/1.0" class="site-sidebar"><div class="site-sidebar-header"><a href="https://doc.sitecore.com/xmc/" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form id="search-form" class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="index-en.html">XM Cloud Documentation for Developers</a></li><li class="breadcrumb-link"><a href="sitecore-javascript-rendering-sdks--jss-.html">Sitecore JavaScript Rendering SDKs (JSS)</a></li><li class="breadcrumb-link"><a href="architecture-overview.html">Architecture overview</a></li><li class="breadcrumb-link"><a href="jss-services-and-apis.html">JSS services and APIs</a></li><li class="breadcrumb-link"><a href="jss-layout-api.html">JSS Layout API</a></li><li class="breadcrumb-node">Using a custom Layout Service configuration with JSS</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="field-values-in-jss-layout-data.html#idm45599297250112">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="using-a-custom-layout-service-configuration-with-jss.html#UUID-31230fa8-224e-872a-2274-d067fea17790_section-idm4585546777748832594193701963">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-11e5030b-2659-65da-8958-ce4c910a07c7" data-permalink="using-a-custom-layout-service-configuration-with-jss.html" data-topic-level="1" data-relative-prefix="" data-time-modified="06/26/2023" data-publication-date="06/30/23" id="UUID-31230fa8-224e-872a-2274-d067fea17790"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Using a custom Layout Service configuration with JSS</h1></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>How to use a custom Layout Service configuration in JSS apps</p></div></div></div></div><p>The Layout Service JSON rendering process is highly configurable and allows you to customize specific aspects of the Layout Service.</p><p>If you want to customize any element of the <code class="code">jss</code> Layout Service configuration, we recommend using the <code class="code">ref</code> attribute to copy in the existing configuration and then customize it within that element. This helps reduce required changes to your configuration if the <code class="code">jss</code> configuration changes during an upgrade.</p><div dir="ltr" class="important"><h3 class="title">Important</h3><p>Modifying the Layout Service configuration used by JSS resulting in changes to object shape, serialization, and placeholder processing, can break the JSS SDKs and can conflict with assumptions made by the JSS import process.</p></div><p>Modifying the serialization configuration allows you to change the JSON data that users can not influence. When modifying the serialization configuration, you can change the whole JSON output or just field names. For example, you can change field names if you want to have them camel-cased.</p><p>After defining your custom configuration, you add the configuration name to the list of <code class="code">&lt;AllowedConfigurations&gt;</code> for the <code class="code">renderJsonRendering</code> pipeline. Doing this ensures that the <code class="code">PlaceholderTransformer</code> code that executes for the default <code class="code">jss</code> configuration executes for your custom configuration as well.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>This step is only relevant if your custom configuration delivers an output that is similar in shape to the default JSS configuration. If your custom configuration is not related to JSS or does not depend on anything from the default <code class="code">jss</code> configuration, this step is not necessary.</p></div><p>The following is a Sitecore configuration patch for a custom layout service configuration named <code class="code">my-jss-config</code> that is based on the default <code class="code">jss</code> configuration:</p><pre class="programlisting xml" data-language="xml">&lt;configuration xmlns:patch="http://www.sitecore.net/xmlconfig/"&gt;
  &lt;sitecore&gt;
    &lt;layoutService&gt;
      &lt;configurations&gt;
        &lt;!-- Define your custom named config, using the `ref` attribute to "copy" the existing `jss` configuration --&gt;
        &lt;config name="my-jss-config"&gt;
          &lt;rendering ref="/sitecore/layoutService/configurations/config[@name='jss']/rendering"&gt;
            &lt;!-- Override placeholdersResolver --&gt;
            &lt;placeholdersResolver type="My.Resolver, My.Assembly"&gt;
          &lt;/rendering&gt;
          &lt;serialization ref="/sitecore/layoutService/configurations/config[@name='jss']/serialization" /&gt;
        &lt;/config&gt;
      &lt;/configurations&gt;
  &lt;/layoutService&gt;
    &lt;pipelines&gt;
        &lt;group groupName="layoutService"&gt;
          &lt;pipelines&gt;
            &lt;renderJsonRendering&gt;
              &lt;processor type="Sitecore.JavaScriptServices.ViewEngine.LayoutService.Pipelines.RenderJsonRendering.AddComponentName, Sitecore.JavaScriptServices.ViewEngine" resolve="true"&gt;
                &lt;AllowedConfigurations hint="list"&gt;
                  &lt;!-- Custom named config is added to this list --&gt;
                  &lt;config id="2"&gt;my-jss-config&lt;/config&gt;
                &lt;/AllowedConfigurations&gt;
              &lt;/processor&gt;
            &lt;/renderJsonRendering&gt;
          &lt;/pipelines&gt;
        &lt;/group&gt;
    &lt;/pipelines&gt;
  &lt;/sitecore&gt;
&lt;/configuration&gt;
</pre><p>After patching in your custom configuration, you can utilize it in your JSS App using the <code class="code">layoutServiceConfiguration</code> attribute.</p><pre class="programlisting xml" data-language="xml">&lt;javaScriptServices&gt;
  &lt;apps&gt;
    &lt;app name="MyApp"
        sitecorePath="/sitecore/content/MyApp"
        layoutServiceConfiguration="my-jss-config"
        inherits="defaults"
    /&gt;
  &lt;/apps&gt;
&lt;/javaScriptServices&gt;
</pre><p>You must provide this configuration name in your client code as well as when invoking the Layout Service using the <code class="code">dataApi</code> (see the previous examples).</p><section dir="ltr" class="section" data-origin-id="" data-publication-date="06/30/23" id="UUID-31230fa8-224e-872a-2274-d067fea17790_section-idm4585546777748832594193701963"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Layout Service configuration</h2></div></div></div><p>You can find Layout Service configurations in the Sitecore configuration at the <code class="code">/sitecore/layoutService/configurations</code> path.</p><pre class="programlisting xml" data-language="xml" id="UUID-31230fa8-224e-872a-2274-d067fea17790_programlisting-idm1403259415289352">&lt;config name="jss"&gt;
    &lt;!--
        An implementation of `Sitecore.LayoutService.Configuration.IRenderingConfiguration`.
        Allows the addition of filtering logic to output renderings and placeholders.
    --&gt;
    &lt;rendering type="Sitecore.LayoutService.Configuration.DefaultRenderingConfiguration, Sitecore.LayoutService"&gt;

        &lt;!--
            An implementation of `Sitecore.LayoutService.Placeholders.IPlaceholdersResolver`.
            Extracts the exposed placeholders of a rendering. Also available is
            `Sitecore.LayoutService.Placeholders.SimplePlaceholdersResolver`.
        --&gt;
        &lt;placeholdersResolver type="Sitecore.LayoutService.Placeholders.DynamicPlaceholdersResolver, Sitecore.LayoutService"/&gt;

        &lt;!--
            An implementation of `Sitecore.LayoutService.Serialization.ItemSerializers.IItemSerializer`.
            Determines what fields of an item should be serialized and writes them out as JSON. 
            The default implementation filters standard fields. Also available is
            `Sitecore.LayoutService.Serialization.ItemSerializers.AllFieldsItemSerializer`.
        --&gt;
        &lt;itemSerializer type="Sitecore.LayoutService.Serialization.ItemSerializers.DefaultItemSerializer, Sitecore.LayoutService" resolve="true"/&gt;

        &lt;!--
            An implementation of `Sitecore.LayoutService.ItemRendering.ContentsResolvers.IRenderingContentsResolver`.
            This is the default contents resolver -- it can be overridden on a per-rendering basis, as described above.
        --&gt;
        &lt;renderingContentsResolver type="Sitecore.LayoutService.ItemRendering.ContentsResolvers.RenderingContentsResolver, Sitecore.LayoutService"&gt;
            &lt;IncludeServerUrlInMediaUrls&gt;true&lt;/IncludeServerUrlInMediaUrls&gt;
        &lt;/renderingContentsResolver&gt;
    &lt;/rendering&gt;

    &lt;!--
        An implementation of Sitecore.LayoutService.Configuration.ISerializationConfiguration.
        Controls the `JsonSerializerSettings` used by the Layout Service and any transformation of the resulting JSON.
        The JSS `SerializationConfiguration` customizes JSON serialization to preserve the case of dictionary keys.
    --&gt;
    &lt;serialization type="Sitecore.JavaScriptServices.ViewEngine.LayoutService.SerializationConfiguration, Sitecore.JavaScriptServices.ViewEngine"&gt;

        &lt;!--
            An implementation of `Sitecore.LayoutService.Serialization.ILayoutTransformer`.
            Provides full control over the shape of the output JSON to optimize it for the use of specific client needs.
            JSS optimizes the output for JavaScript consumption.
        --&gt;
        &lt;transformer type="Sitecore.JavaScriptServices.ViewEngine.LayoutService.Serialization.LayoutTransformer, Sitecore.JavaScriptServices.ViewEngine"/&gt;
    &lt;/serialization&gt;
&lt;/config&gt;</pre><p>The <code class="code">name</code> attribute of the <code class="code">config</code> node corresponds to the <code class="code">config</code> parameter in the Layout Service URL:</p><pre class="programlisting plaintext" data-language="plaintext">/sitecore/api/layout/render/[config]?item=[path]&amp;sc_lang=[language]&amp;sc_apikey=[key]&amp;tracking=[true|false]</pre></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-31230fa8-224e-872a-2274-d067fea17790">Using a custom Layout Service configuration with JSS</a></li><li><a href="#UUID-31230fa8-224e-872a-2274-d067fea17790_section-idm4585546777748832594193701963">Layout Service configuration</a></li></ul></aside></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="field-values-in-jss-layout-data.html#idm45599297250112">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="using-a-custom-layout-service-configuration-with-jss.html#UUID-31230fa8-224e-872a-2274-d067fea17790_section-idm4585546777748832594193701963">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023 Sitecore </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">06/26/2023</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date">06/30/23</span></div></div></footer></div></div></div></div><script type="text/javascript" src="//customer.cludo.com/scripts/bundles/search-script.min.js"></script><script>
			var CludoSearch;
			(function () {
			var cludoSettings = {
			customerId: 2063,
			engineId: 12826,
			language: 'en',
			searchInputs: ["search-form","cludo-search-content-form","cludo-search-mobile-form"],
			hideSearchFilters: true,
			type: 'standardOverlay',
			facets: ["Category", "ProductVer", "Product", "Version"],
			useStandardSearchTemplate: false,
			customerTemplate: "OverlayCopy",
			searchApiUrl: 'https://api-eu1.cludo.com/api/v3'
			};
			CludoSearch= new Cludo(cludoSettings);
			CludoSearch.init();
			})();
		</script><!-- www.Cludo.com Search body init script start --></body></html>
