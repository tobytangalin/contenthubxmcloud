<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			</script><title>Walkthrough: Enabling the DAM connector in an XM Cloud environment deployed to XM Cloud</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/62ea68e1188c6.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/jquery.paligocode.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="description" content="How to enable the Sitecore Connect for Content Hub connector to Sitecore Digital Asset Management Platform in an environment deployed to XM Cloud."></meta><link rel="prev" href="enabling-the-cmp-connector-in-an-xm-cloud-environment-deployed-to-xm-cloud.html#UUID-096ad0d3-9f96-f9e3-4d0c-365cf3234503_section-idm4490170337547233346143993859" title="Configure and enable the CMP connector in the XM Cloud Deploy app"></link><link rel="next" href="walkthrough--enabling-the-dam-connector-in-an-xm-cloud-environment-deployed-to-xm-cloud.html#UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_section-idm1733377271538346" title="Prerequisites"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../js/cookie-consent.js"></script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/an-old-hope.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script></head><body class="theme1 page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="navbar-collapse collapse" id="navbar"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" placeholder="Search" class="form-control search-field" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="index-en.html">Enabling SCCH in XM Cloud</a></li><li class="breadcrumb-link"><a href="enabling-sitecore-cmp-and-dam-in-xm-cloud.html">Enabling Sitecore CMP and DAM in XM Cloud</a></li><li class="breadcrumb-node">Walkthrough: Enabling the DAM connector in an XM Cloud environment deployed to XM Cloud</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="enabling-the-cmp-connector-in-an-xm-cloud-environment-deployed-to-xm-cloud.html#UUID-096ad0d3-9f96-f9e3-4d0c-365cf3234503_section-idm4490170337547233346143993859">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="walkthrough--enabling-the-dam-connector-in-an-xm-cloud-environment-deployed-to-xm-cloud.html#UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_section-idm1733377271538346">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-121a1484-a2a7-e803-0e0f-1976a38f2027" data-permalink="walkthrough--enabling-the-dam-connector-in-an-xm-cloud-environment-deployed-to-xm-cloud.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Walkthrough: Enabling the DAM connector in an XM Cloud environment deployed to XM Cloud<span id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_UUID-a0bb532e-21a1-6c60-5033-0965bbd1bdf2"></span></h1></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>How to enable the Sitecore Connect for Content Hub connector to Sitecore Digital Asset Management Platform in an environment deployed to XM Cloud.</p></div></div></div></div><p>To use Sitecore DAM in an environment deployed to XM Cloud, you must configure and enable the DAM connector.</p><p>This walkthrough describes how to:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configure and enable the DAM connector</p></li><li class="listitem"><p>Configure a connection to DAM</p></li><li class="listitem"><p>Configure CORS for DAM</p></li></ul></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_section-idm1733377271538346"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Prerequisites</h2></div></div></div><p>Before you enable the DAM connector, you must have <a class="link linktype-component" href="create-a-user-in-sitecore-content-hub-for-scch.html" title="Create a user in Sitecore Content Hub for SCCH">a user in Sitecore Content Hub that has the relevant user rights</a></p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idm45776295637712"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Configure and enable the DAM connector in the XM Cloud Deploy app</h2></div></div></div><div class="procedure" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_procedure-idm4534709617988833771314893228"><ol class="procedure" type="1"><li class="step"><p>Log in to the <a class="link" href="https://deploy.sitecorecloud.io/" target="_blank" rel="noopener">XM Cloud Deploy app</a>.</p></li><li class="step"><p>On the navigation pane of the XM Cloud Deploy app, click <span class="guilabel">Projects</span>.</p></li><li class="step"><p>On the <span class="guilabel">Projects</span> page, click the project that contains the environment where you want to enable the DAM connector.</p></li><li class="step"><p>On the project page, click the environment where you want to enable the DAM connector.</p></li><li class="step"><p>On the environment page, click <span class="guilabel">Variables</span>, then click <span class="guilabel">Create variable</span>.</p></li><li class="step"><p>Create the following variables. For each variable, set the Target to <span class="guilabel">All</span>.</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><thead><tr><th class="th"><p>Variable</p></th><th class="th"><p>Value</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p><code class="code">Sitecore_ConnectionStrings_DAM_dot_ContentHub</code></p></td><td class="td"><p><code class="code">ClientId={client_id};ClientSecret = {client_secret};UserName={username};Password={password};URI={uri};</code></p><p>Example: <code class="code">ClientId=LogicApp;ClientSecret=a51a8fb6-4f57-1234-a244-4bfc05be6cb5;UserName=johnsmith;Password=hunter2;URI=https://contenthuburl.com/;</code></p></td><td class="td"><p>To get the <code class="code">client_id</code> and <code class="code">client_secret</code>, open Sitecore Content Hub. On the ribbon, click <span class="guilabel">Manage</span> <span class="inlinemediaobject"><img src="image/uuid-67d31cdb-cce3-b665-8808-efeba0a29f72.png" alt="manage-gear-icon.png"></img></span>, click <span class="guilabel">OAuth Clients</span>, click <span class="guilabel">LogicApp</span>.</p><p>The <code class="code">username</code> and <code class="code">password</code> of the user you created in Content Hub.</p><p><code class="code">uri</code> of your Content Hub instance.</p></td></tr><tr><td class="td"><p><code class="code">Sitecore_ConnectionStrings_DAM_dot_SearchPage</code></p></td><td class="td"><p><code class="code">{Sitecore Content Hub search page URI}</code></p><p>Example: <code class="code">https://sitecore-contenthub-dam-uri/en-us/sitecore-dam-connect/approved-assets</code></p></td><td class="td"><p>The URI for the page that <a class="link linktype-component" href="display-assets.html" title="Display assets">opens the DAM in an IFrame</a>.</p></td></tr><tr><td class="td"><p><code class="code">Sitecore_ConnectionStrings_DAM_dot_ExternalRedirectKey</code></p></td><td class="td"><p><code class="code">Sitecore</code></p></td><td class="td"><p></p></td></tr><tr><td class="td"><p><code class="code">SITECORE_AppSettings_damEnabled__define</code></p></td><td class="td"><p><code class="code">yes</code></p></td><td class="td"><p>By default, when you deploy an environment to XM Cloud, the DAM connector is disabled. To enable the connector, set this value to <code class="code">yes</code>.</p></td></tr></tbody></table></div></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idm45776295635040"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Configure a DAM connection</h2></div></div></div><p>To configure a DAM connection:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Clone the source control repository linked to your XM Cloud environment.</p></li><li class="step"><p>In the XM Cloud repository folder, create the following subfolder:</p><pre class="programlisting plaintext" data-language="plaintext" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_programlisting-idm4493579405980833344623610826">{Project Repo Name}/src/platform/App_Data/Xdts</pre></li><li class="step"><p>Open the <code class="code">Xdts</code> subfolder, create a file named <code class="code">Web.config.xdt</code>, and open it for editing. Add the instructions to modify the <code class="code">web.config</code> file for the DAM configuration. For example:</p><pre class="programlisting xml" data-language="xml" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_programlisting-idm46701130489120333446265566">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform"&gt;
    &lt;location path="sitecore"&gt;
        &lt;system.webServer&gt;
            &lt;httpProtocol&gt;
                &lt;customHeaders&gt;
                    &lt;add name="Content-Security-Policy" value="default-src 'self' 'unsafe-inline' 'unsafe-eval' https://apps.sitecore.net; img-src 'self' data: https://content-hub-url.stylelabs.com/ https://content-hub-url-delivery.stylelabs.cloud/ https://s.gravatar.com https://*.wp.com/cdn.auth0.com/avatars; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' 'unsafe-inline' https://fonts.gstatic.com; block-all-mixed-content; child-src 'self' https://chpipeline-ch400.sitecoresandbox.cloud/; connect-src 'self' https://content-hub-url.stylelabs.com/ https://content-hub-url-delivery.stylelabs.cloud/; media-src https://content-hub-url.stylelabs.com/ https://content-hub-url-delivery.stylelabs.cloud/" xdt:Transform="Replace" xdt:Locator="Match(name)"/&gt; 
                &lt;/customHeaders&gt;
            &lt;/httpProtocol&gt;
        &lt;/system.webServer&gt;
    &lt;/location&gt;
&lt;/configuration&gt;</pre><p>Ensure that the <code class="code">Content-Security-Policy</code> tag contains the URL of the Content Hub instance (for example, <code class="code">content-hub-url.stylelabs.com</code>), other delivery hostnames (for example, <code class="code">content-hub-url-delivery.stylelabs.cloud</code>), and generated public links (for example, <code class="code">content-hub-url.stylelabs.com:8686</code>).</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>In Content Hub, you can configure different delivery hostnames for public links by using the <code class="literal">AssetExtensionDataConfigurationSetting</code> setting.</p><p>If you have configured different hostnames, you must add all the hostnames as sources to the <code class="literal">Content-Security-Policy</code> parameter, in the <code class="literal">img-src</code>, <code class="literal">child-src</code>, and <code class="literal">connect-src</code> properties.</p></div></li><li class="step"><p>Save the file.</p></li><li class="step"><p>To include the <code class="code">web.config</code> file transformation in the XM Cloud build configuration, navigate to the root folder, and open the <code class="code">xmcloud.build.json</code> file for editing. Add the following properties:</p><pre class="programlisting json" data-language="json" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_programlisting-idm4626086543740833344636471482">"transforms": [
    {
        "xdtPath": "/app_data/xdts/web.config.xdt",
        "targetPath": "/web.config"
    }
]</pre></li><li class="step"><p>In the <span class="emphasis"><em>src/platform</em></span> folder, open the <code class="code">Platform.csproj</code> file and add the following:</p><pre class="programlisting xml" data-language="xml" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_programlisting-idm4587256448438433494657318488">&lt;ItemGroup&gt;
    &lt;Content Include="App_Data\**" /&gt;
&lt;/ItemGroup&gt;</pre></li><li class="step"><p>Commit your changes and push them to the remote repository.</p></li><li class="step"><p>In the XM Cloud Deploy app, <a class="link linktype-component linktextconsumer" href="/document/preview/802118#UUID-f23ae535-cafe-3d58-7ff5-2e45a8ddf18e" target="_blank">create a build and deploy it to your environment</a>.<span id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_N64ae588ca4c16" class="linktextprovider" style="display:none !important;">Manage an environment</span></p></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_section-idm4674549187238433600376571022"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Configure CORS for DAM</h2></div></div></div><p>To enable the Content Hub DAM iframe to successfully display in the XM Cloud Pages media item picker, you need to add the Pages and environment host name URLs to Content Hub CORS configuration.</p><p>To configure CORS for DAM:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>On the Sitecore DAM main menu, click <span class="guilabel">Manage</span>, then <span class="guilabel">Settings</span>.</p></li><li class="step"><p>On the <span class="guilabel">Settings</span> page, click <span class="guilabel">PortalConfiguration</span>, then click <span class="guilabel">CORSConfiguration</span>.</p></li><li class="step"><p>In <span class="guilabel">URL</span> field, enter the URL of Sitecore Pages: <code class="code">https://pages.sitecorecloud.io/</code>, then click <span class="guilabel">Add</span>.</p></li><li class="step"><p>In <span class="guilabel">URL</span> field, enter <code class="code">https://</code>, then the environment host name of your XM Cloud environment, for example: <code class="code">https://my-xmc-environment-host-name.cloud/</code>, then click <span class="guilabel">Add</span>. You can find your environment host name in your <a class="link linktype-component linktextconsumer" href="/document/preview/802118#UUID-f23ae535-cafe-3d58-7ff5-2e45a8ddf18e" target="_blank">environment details</a>.<span id="UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_N64ae588ca5506" class="linktextprovider" style="display:none !important;">Manage an environment</span></p><p>You can now <a class="link linktype-component" href="display-assets.html" title="Display assets">display DAM assets in the Content Editor</a>.</p></li></ol></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784">Walkthrough: Enabling the DAM connector in an XM Cloud environment deployed to XM Cloud</a></li><li><a href="#UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_section-idm1733377271538346">Prerequisites</a></li><li><a href="#idm45776295637712">Configure and enable the DAM connector in the XM Cloud Deploy app</a></li><li><a href="#idm45776295635040">Configure a DAM connection</a></li><li><a href="#UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_section-idm4674549187238433600376571022">Configure CORS for DAM</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="enabling-the-cmp-connector-in-an-xm-cloud-environment-deployed-to-xm-cloud.html#UUID-096ad0d3-9f96-f9e3-4d0c-365cf3234503_section-idm4490170337547233346143993859">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="walkthrough--enabling-the-dam-connector-in-an-xm-cloud-environment-deployed-to-xm-cloud.html#UUID-38ffd9d0-fd7d-a25b-bb4e-f8fc5c054784_section-idm1733377271538346">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023  </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
