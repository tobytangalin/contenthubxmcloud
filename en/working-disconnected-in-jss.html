<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="Audience - do not use" content=""></meta><meta name="clubot" content=""></meta><meta name="data model" content=""></meta><meta name="DxP type - Do Not Use" content=""></meta><meta name="media_icon" content=""></meta><meta name="product" content="XM Cloud"></meta><meta name="Publishing target" content="Production"></meta><meta name="Ready for publishing - do not use" content=""></meta><meta name="role" content="developers"></meta><meta name="topic_tripane" content=""></meta><meta name="version" content=""></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
					function addSearch(){
					//not used with custom or elastic search
					}
				</script><title>Working disconnected in JSS</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/content-theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="/css/sitecore-custom-default-xmc.css?version=20230630"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js?version=20230630" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js?version=20230630" type="text/javascript"></script><script src="../js/html5-2.js?version=20230630" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="/js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="description" content="Defining route data and customizing data in JSS code-first, disconnected development"></meta><link rel="prev" href="remove-code-first-artifacts-from-a-jss-app.html" title="Remove code-first artifacts from a JSS app"></link><link rel="next" href="working-disconnected-in-jss.html#idm45599228628272" title="Defining route data"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script><script type="text/javascript">var privacypolicy = 'https://www.sitecore.com/trust/privacy-policy';
var consenttype = 'opt-out';
</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-72664331-1"></script><script type="text/javascript">const measurementId = 'UA-72664331-1';

						$(document).on('cookies.consented', () => {
							window.dataLayer = window.dataLayer || [];
							function gtag(){dataLayer.push(arguments)};

							gtag('js', new Date());
							gtag('config', measurementId);
						});
					</script><script type="text/javascript" src="../js/cookie-consent.js"></script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script><link href="//customer.cludo.com/assets/2063/10039/cludo-search.min.css" type="text/css" rel="stylesheet"></link></head><body class="theme1 colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://doc.sitecore.com/xmc/" target="_blank" rel="noopener"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="navbar-collapse collapse" id="navbar"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside xmlns:xinfo="http://ns.expertinfo.se/cms/xmlns/1.0" class="site-sidebar"><div class="site-sidebar-header"><a href="https://doc.sitecore.com/xmc/" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form id="search-form" class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="index-en.html">XM Cloud Documentation for Developers</a></li><li class="breadcrumb-link"><a href="sitecore-javascript-rendering-sdks--jss-.html">Sitecore JavaScript Rendering SDKs (JSS)</a></li><li class="breadcrumb-node">Working disconnected in JSS</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="remove-code-first-artifacts-from-a-jss-app.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="working-disconnected-in-jss.html#idm45599228628272">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-7bb2d78e-a365-a0e6-f165-e87026b63c84" data-permalink="working-disconnected-in-jss.html" data-topic-level="1" data-relative-prefix="" data-time-modified="07/25/2022" data-publication-date="06/30/23" id="UUID-96e5ccb9-1cd4-9528-0074-326b99e1f6fc"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Working disconnected in JSS</h1></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>Defining route data and customizing data in JSS code-first, disconnected development</p></div></div></div></div><p>To support working <a class="link linktype-component" href="start-a-jss-app-in-disconnected-mode.html" title="Start a JSS app in disconnected mode">disconnected</a> and deploy the data to Sitecore later, you must define your app data without Sitecore, by generating a manifest with the <a class="link linktype-component" href="jss-manifest-api.html" title="JSS Manifest API">Manifest API</a>.</p><p>The manifest is a JSON file representing your data in a format that can be imported into Sitecore using the <a class="link linktype-component" href="jss-app-import-api.html" title="JSS App Import API">App Import API</a> or used to host the app in disconnected mode.</p><p>When working disconnected you use the <a class="link linktype-component" href="code-first-development-workflow.html" title="Code-first development workflow">code-first development workflow</a>.</p><div dir="ltr" class="tip"><h3 class="title">Tip</h3><p>Your app can utilize a <a class="link linktype-component" href="sitecore-first-development-workflow.html" title="Sitecore-first development workflow">Sitecore-first development approach</a>, in which case you do not need to generate an app manifest. Developing Sitecore-first requires a Sitecore instance to run the app.</p><p>We recommend using code-first for the initial deployment of a JSS app to Sitecore, even if not using the pattern after that, to save time setting up items for your JSS application.</p></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="06/30/23" id="idm45599228628272"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Defining route data</h2></div></div></div><p>Route data is used to represent the routes served by your app when running in <span class="emphasis"><em>disconnected mode</em></span>. The <code class="code">Placeholder</code> component, and any components that it renders, expect route data to adhere to a <a class="link linktype-component" href="adding-manifest-definitions-in-code-first-jss-apps.html" title="Adding Manifest definitions in code-first JSS apps">specific schema</a>.</p><p>For disconnected development, route data is typically retrieved from static YAML or JSON files, or simple JavaScript files. For connected development or production, the route data is retrieved using calls to the <a class="link linktype-component" href="layout-service.html" title="Layout Service">Sitecore Layout Service</a> (through HTTP requests, or in-process for integrated mode SSR).</p><p>The sample apps define route data in <code class="code">/data/routes</code> by using <a class="link" href="https://en.wikipedia.org/wiki/YAML" target="_blank" rel="noopener">YAML</a> files. You can choose to use JSON files instead if you prefer that format (just rename the file to .json and run the content through a <a class="link" href="https://jsonformatter.org/yaml-to-json" target="_blank" rel="noopener">YAML-to-JSON converter</a>). YAML supports comments, multiline values, and other features that improve the content authoring experience.</p><p>You can <a class="link linktype-component" href="create-a-route-type-with-fields-in-jss-code-first-development.html" title="Create a route type with fields in JSS code-first development">create a route type with fields</a> or <a class="link linktype-component" href="add-additional-root-placeholders-in-a-code-first-jss-sample-app.html" title="Add additional root placeholders in a code-first JSS sample app">add additional root placeholders in a code-first JSS sample app</a> when working.</p></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="06/30/23" id="UUID-96e5ccb9-1cd4-9528-0074-326b99e1f6fc_section-idm4613160030838432684055528532"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Customizing data in disconnected mode</h2></div></div></div><p>When disconnected mode starts up, it creates a mock version of the JSS services that can run in connected mode on Sitecore.</p><p>These mock services might need to be customized to account for <a class="link linktype-component" href="extending-the-layout-service.html" title="Extending the Layout Service">server-side customizations</a> to Layout Service so that disconnected mode receives the same customizations.</p><section dir="ltr" class="section" data-origin-id="" data-publication-date="06/30/23" id="idm45599228615504"><div class="titlepage"><div><div class="title"><h3 class="title">The disconnected mode proxy</h3></div></div></div><p>The disconnected mode starts up a local HTTP server to run the mock APIs. This is defined in the sample apps in <code class="code">scripts/disconnected-mode-proxy</code>, and this is what is customized when you want to alter the disconnected mode data.</p><p>The default disconnected mode proxy comes with a number of options to customize its data. The <code class="code">sitecore-jss-dev-tools</code> package exports the <code class="code">DisconnectedLayoutServiceOptions</code> TypeScript typing that documents the full array of options and their signatures. TypeScript-aware editors, like VS Code, enable reading this metadata even if the file is not TypeScript.</p><pre class="programlisting">const proxyOptions = {
  appRoot: __dirname,
  appName: config.appName,
  watchPaths: ['../data'],
  language: config.language,
  port: 3042,
  compilers: ['@babel/register'],
  ...
};</pre></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="06/30/23" id="idm45599228615376"><div class="titlepage"><div><div class="title"><h3 class="title">Customizing the context</h3></div></div></div><p>When <a class="link linktype-component" href="extending-context-data-returned-by-the-layout-service.html" title="Extending context data returned by the Layout Service">customizing the Layout Service context</a> on the Sitecore side, you might want to apply similar customizations when disconnected. The <code class="code">customizeContext</code> hook allows you to do that:</p><pre class="programlisting">const proxyOptions = {
  appRoot: __dirname,
  customizeContext: (context, route, currentManifest, request, response) =&gt; {
    return { myCustomContextProperty: 'helloworld', ...context };
  },
  ...
};</pre></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="06/30/23" id="idm45599228611776"><div class="titlepage"><div><div class="title"><h3 class="title">Customizing component data</h3></div></div></div><p>When <a class="link linktype-component" href="customizing-the-layout-service-rendering-output.html" title="Customizing the Layout Service rendering output">customizing component data using Rendering Contents Resolvers or Integrated GraphQL in Sitecore</a>, you might want to apply similar customizations when disconnected. The <code class="code">customizeRendering</code> hook allows you to do that:</p><pre class="programlisting">const proxyOptions = {
  appRoot: __dirname,
  customizeRendering: (rendering, rawManifestRendering) =&gt; {
    // mock integrated GraphQL results for a specific component name
    if (rendering.componentName === 'ContentBlock' &amp;&amp; rendering.fields) {
      rendering.fields = {
        data: {
          item: {
            id: 'mock-graphql-result-id',
            heading: {
              jss: rendering.fields.heading,
            }
          }
        }
      };

      return rendering;
    }

    // customize data based on a flag value added to the component definition on the route
    // i.e. in YAML, 
    // - componentName: Whatever
    //   addCoolStuff: true
    if (rawManifestRendering.dataSource.addCoolStuff) {
      return {
        coolStuff: [
          'React',
          'Vue',
        ],
        ...transformed,
      };
    }

    // returning falsy will cause JSS to use the default value
    return undefined; // is a function
  },
  ...
};</pre></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="06/30/23" id="idm45599228608176"><div class="titlepage"><div><div class="title"><h3 class="title">Advanced customizations</h3></div></div></div><p>The disconnected server in sample apps defaults to using the <code class="code">createDefaultDisconnectedServer()</code> helper function. This function provides basic customization APIs and encapsulates the registrations of several middlewares that make the disconnected server work. You can also unpack the function and register the middleware yourself if you want to do advanced customizations that are not supported by the default <code class="code">DisconnectedServerOptions</code>.</p></section></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-96e5ccb9-1cd4-9528-0074-326b99e1f6fc">Working disconnected in JSS</a></li><li><a href="#idm45599228628272">Defining route data</a></li><li><a href="#UUID-96e5ccb9-1cd4-9528-0074-326b99e1f6fc_section-idm4613160030838432684055528532">Customizing data in disconnected mode</a><ul class="nav"><li><a href="#idm45599228615504">The disconnected mode proxy</a></li><li><a href="#idm45599228615376">Customizing the context</a></li><li><a href="#idm45599228611776">Customizing component data</a></li><li><a href="#idm45599228608176">Advanced customizations</a></li></ul></li></ul></aside></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="remove-code-first-artifacts-from-a-jss-app.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="working-disconnected-in-jss.html#idm45599228628272">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023 Sitecore </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">07/25/2022</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date">06/30/23</span></div></div></footer></div></div></div></div><script type="text/javascript" src="//customer.cludo.com/scripts/bundles/search-script.min.js"></script><script>
			var CludoSearch;
			(function () {
			var cludoSettings = {
			customerId: 2063,
			engineId: 12826,
			language: 'en',
			searchInputs: ["search-form","cludo-search-content-form","cludo-search-mobile-form"],
			hideSearchFilters: true,
			type: 'standardOverlay',
			facets: ["Category", "ProductVer", "Product", "Version"],
			useStandardSearchTemplate: false,
			customerTemplate: "OverlayCopy",
			searchApiUrl: 'https://api-eu1.cludo.com/api/v3'
			};
			CludoSearch= new Cludo(cludoSettings);
			CludoSearch.init();
			})();
		</script><!-- www.Cludo.com Search body init script start --></body></html>
