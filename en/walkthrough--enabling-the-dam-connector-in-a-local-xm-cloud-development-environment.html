<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			</script><title>Walkthrough: Enabling the DAM connector in a local XM Cloud development environment</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css"></link><link rel="stylesheet" type="text/css" href="../css/content-theme2.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="../css/62ea68e1188c6.css"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js" type="text/javascript"></script><script src="../js/html5-2.js" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/fuse.min.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="../js/html5.fuse.search.js" type="text/javascript"></script><script src="js/fuzzydata.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="../js/jquery.paligocode.js" type="text/javascript"></script><script src="../js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="description" content="How to enable the Sitecore Connect for Content Hub connector to Sitecore Digital Asset Management in XM Cloud in a local XM Cloud development environment running in a Docker container."></meta><link rel="prev" href="enabling-the-cmp-connector-in-a-local-xm-cloud-development-environment.html#UUID-84c21bc3-2d19-1358-e8a9-32732858d640_section-idm93334620251844" title="Configure and enable the CMP connector in your local development environment"></link><link rel="next" href="walkthrough--enabling-the-dam-connector-in-a-local-xm-cloud-development-environment.html#UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_section-idm1733377271310478" title="Prerequisites"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><script type="text/javascript" src="../js/cookie-consent.js"></script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/an-old-hope.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script></head><body class="theme1 page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="navbar-collapse collapse" id="navbar"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside class="site-sidebar"><div class="site-sidebar-header"><button type="button" class="navbar-toggle" aria-controls="nav-site-sidebar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="../index.html?lang=en"><img id="logotype-pageheader" src="../css/image/corporate-logo.svg" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form class="site-sidebar-search" autocomplete="off"><input type="text" placeholder="Search" class="form-control search-field" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="index-en.html">Enabling SCCH in XM Cloud</a></li><li class="breadcrumb-link"><a href="enabling-sitecore-cmp-and-dam-in-xm-cloud.html">Enabling Sitecore CMP and DAM in XM Cloud</a></li><li class="breadcrumb-node">Walkthrough: Enabling the DAM connector in a local XM Cloud development environment</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="enabling-the-cmp-connector-in-a-local-xm-cloud-development-environment.html#UUID-84c21bc3-2d19-1358-e8a9-32732858d640_section-idm93334620251844">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="walkthrough--enabling-the-dam-connector-in-a-local-xm-cloud-development-environment.html#UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_section-idm1733377271310478">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-8e54175c-f452-f32c-3da2-4e9687672b80" data-permalink="walkthrough--enabling-the-dam-connector-in-a-local-xm-cloud-development-environment.html" data-topic-level="1" data-relative-prefix="" data-publication-date="" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Walkthrough: Enabling the DAM connector in a local XM Cloud development environment<span id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_UUID-0e36c406-8ec6-9b8f-4af8-7a5e18fbb37e"></span></h1></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>How to enable the Sitecore Connect for Content Hub connector to Sitecore Digital Asset Management in XM Cloud in a local XM Cloud development environment running in a Docker container.</p></div></div></div></div><p>To use Sitecore Digital Asset Management (DAM) in a local XM Cloud development environment running in a Docker container, you must configure and enable the DAM connector.</p><p>This walkthrough describes how to:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Configure a DAM connection</p></li><li class="listitem"><p>Configure and enable the DAM connector</p></li><li class="listitem"><p>Configure CORS for DAM</p></li></ul></div><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_section-idm1733377271310478"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Prerequisites</h2></div></div></div><p>Before you enable the DAM connector, you must have:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link linktype-component" href="create-a-user-in-sitecore-content-hub-for-scch.html" title="Create a user in Sitecore Content Hub for SCCH">A user in Sitecore Content Hub that has the relevant user rights</a></p></li><li class="listitem"><p><a class="link" href="https://doc.sitecore.com/ch/en/users/latest/content-hub/manage--create-an-oauth-client.html" target="_blank" rel="noopener">An OAuth client</a> for the connector.</p></li></ul></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idm45146578107328"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Configure a DAM connection</h2></div></div></div><p>To configure a DAM connection:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Clone the source control repository linked to your XM Cloud environment.</p></li><li class="step"><p>In the XM Cloud repository folder, create the following subfolder:</p><pre class="programlisting plaintext" data-language="plaintext" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_programlisting-idm1731689257644253">{Project Repo Name}/src/platform/App_Data/Xdts</pre></li><li class="step"><p>Open the <code class="code">Xdts</code> subfolder, create a file named <code class="code">Web.config.xdt</code>, and open it for editing. Add the instructions to modify the <code class="code">web.config</code> file for the DAM configuration. For example:</p><pre class="programlisting xml" data-language="xml" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_programlisting-idm1733378515288504">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform"&gt;
    &lt;location path="sitecore"&gt;
        &lt;system.webServer&gt;
            &lt;httpProtocol&gt;
                &lt;customHeaders&gt;
                    &lt;add name="Content-Security-Policy" value="default-src 'self' 'unsafe-inline' 'unsafe-eval' https://apps.sitecore.net; img-src 'self' data: https://content-hub-url.stylelabs.com/ https://content-hub-url-delivery.stylelabs.cloud/ https://s.gravatar.com https://*.wp.com/cdn.auth0.com/avatars; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' 'unsafe-inline' https://fonts.gstatic.com; block-all-mixed-content; child-src 'self' https://chpipeline-ch400.sitecoresandbox.cloud/; connect-src 'self' https://content-hub-url.stylelabs.com/ https://content-hub-url-delivery.stylelabs.cloud/; media-src https://content-hub-url.stylelabs.com/ https://content-hub-url-delivery.stylelabs.cloud/" xdt:Transform="Replace" xdt:Locator="Match(name)"/&gt; 
                &lt;/customHeaders&gt;
            &lt;/httpProtocol&gt;
        &lt;/system.webServer&gt;
    &lt;/location&gt;
&lt;/configuration&gt;</pre><p>Ensure that the <code class="code">Content-Security-Policy</code> tag contains the URL of the Content Hub instance (for example, <code class="code">content-hub-url.stylelabs.com</code>), other delivery hostnames (for example, <code class="code">content-hub-url-delivery.stylelabs.cloud</code>), and generated public links (for example, <code class="code">content-hub-url.stylelabs.com:8686</code>).</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>In Content Hub, you can configure different delivery hostnames for public links by using the <code class="literal">AssetExtensionDataConfigurationSetting</code> setting.</p><p>If you have configured different hostnames, you must add all the hostnames as sources to the <code class="literal">Content-Security-Policy</code> parameter, in the <code class="literal">img-src</code>, <code class="literal">child-src</code>, and <code class="literal">connect-src</code> properties.</p></div></li><li class="step"><p>Save the file.</p></li><li class="step"><p>To include the <code class="code">web.config</code> file transformation in the XM Cloud build configuration, navigate to the root folder, and open the <code class="code">xmcloud.build.json</code> file for editing. Add the following properties:</p><pre class="programlisting json" data-language="json" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_programlisting-idm1735067772932755">"transforms": [
    {
        "xdtPath": "/app_data/xdts/web.config.xdt",
        "targetPath": "/web.config"
    }
]</pre></li><li class="step"><p>In the <span class="emphasis"><em>src/platform</em></span> folder, open the <code class="code">Platform.csproj</code> file and add the following:</p><pre class="programlisting xml" data-language="xml" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_programlisting-idm1736757030577006">&lt;ItemGroup&gt;
    &lt;Content Include="App_Data\**" /&gt;
&lt;/ItemGroup&gt;</pre></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="idm45146578104096"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Configure and enable the DAM connector</h2></div></div></div><p>The DAM connector adds the <span class="guilabel">Insert from Sitecore DAM</span> item to the Rich Text Default profile for the Rich Text Editor. To enable the insert function, you must configure a connection to Sitecore DAM.</p><p>To configure the connector:</p><div class="procedure" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_procedure-idm93334621309528"><ol class="procedure" type="1"><li class="step"><p>In Github, clone the project repository you created in Sitecore Cloud Portal,</p></li><li class="step"><p>In your XM Cloud repository folder, open the <code class="code">.env</code> file and add the following variables:</p><div class="informaltable table-responsive"><table class="informaltable frame-void rules-rows"><thead><tr><th class="th"><p>Variable</p></th><th class="th"><p>Value</p></th><th class="th"><p>Description</p></th></tr></thead><tbody><tr><td class="td"><p><code class="code">Sitecore_DAM_ContentHub</code></p></td><td class="td"><p><code class="code">ClientId={client_id};ClientSecret={client_secret};UserName={username};Password={password};URI={uri};</code></p><p>Example: <code class="code">Sitecore_DAM_ContentHub=ClientId=LogicApp;ClientSecret=a51a8fb6-4f57-1234-a244-4bfc05be6cb5;UserName=johnsmith;Password=hunter2;URI=https://contenthuburl.com/;</code></p></td><td class="td"><p>The <span class="guilabel">Client ID</span> and <span class="guilabel">Client Secret</span> of the connector's OAuth client.</p><p>The <code class="code">username</code> and <code class="code">password</code> of the user you created in Content Hub.</p><p><code class="code">uri</code> of your Content Hub instance.</p></td></tr><tr><td class="td"><p><code class="code">Sitecore_DAM_SearchPage</code></p></td><td class="td"><p><code class="code">{Sitecore Content Hub search page URI}</code></p><p>Example: <code class="code">https://sitecore-contenthub-dam-uri/en-us/sitecore-dam-connect/approved-assets</code></p></td><td class="td"><p>The URI for the page that <a class="link linktype-component" href="display-assets.html" title="Display assets">opens the DAM in an IFrame</a>.</p></td></tr><tr><td class="td"><p><code class="code">Sitecore_DAM_ExternalRedirectKey</code></p></td><td class="td"><p><code class="code">Sitecore</code></p></td><td class="td"><p></p></td></tr><tr><td class="td"><p><code class="code">SITECORE_AppSettings_damEnabled__define</code></p></td><td class="td"><p><code class="code">yes</code></p></td><td class="td"><p>By default, the DAM connector is disabled. To enable the connector, set this value to <code class="code">yes</code>.</p></td></tr></tbody></table></div></li><li class="step"><p>Apply the XDT transforms to your base image. For more information, see <a class="link" href="https://doc.sitecore.com/xp/en/developers/latest/developer-tools/applying-configuration-transforms.html" target="_blank" rel="noopener">applying configuration transforms</a>.</p></li><li class="step"><p>In the repository folder, open a Windows console and run the following command:</p><pre class="programlisting shell" data-language="shell" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_programlisting-idm1733377475959000">docker compose up -d</pre><div dir="ltr" class="note"><h3 class="title">Note</h3><p>For information on setting up your local environment see <a class="xref linktype-component linktextconsumer" href="/document/preview/790232#UUID-b7059c0b-2f6e-6b86-e02e-1d4c4cc7615f" target="_blank">Walkthrough: Setting up your full-stack XM Cloud local development environment</a><span style="display:none !important;" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_N64b79ddf0fa31" class="linktextprovider">Walkthrough: Setting up your full-stack XM Cloud local development environment</span></p></div></li></ol></div></section><section dir="ltr" class="section" data-origin-id="" data-publication-date="" id="UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_section-idm1733379333556304"><div class="titlepage"><div><div class="title"><h2 class="title" style="clear: both">Configure CORS for DAM</h2></div></div></div><p>To enable the Content Hub DAM iframe to successfully display in the Content Editor and XM Cloud Pages media item picker, you need to add the Pages and environment host name URLs to Content Hub CORS configuration.</p><p>To configure CORS for DAM:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>On the Sitecore DAM main menu, click <span class="guilabel">Manage</span>, then <span class="guilabel">Settings</span>.</p></li><li class="step"><p>On the <span class="guilabel">Settings</span> page, click <span class="guilabel">PortalConfiguration</span>, then click <span class="guilabel">CORSConfiguration</span>.</p></li><li class="step"><p>In <span class="guilabel">URL</span> field, enter the URL of Sitecore Pages: <code class="code">https://pages.sitecorecloud.io/</code>, then click <span class="guilabel">Add</span>.</p></li><li class="step"><p>In <span class="guilabel">URL</span> field, enter <code class="code">https://</code>, then the environment host name of your local environment, for example: <code class="code">https://xmcloudcm.localhost/</code>, then click <span class="guilabel">Add</span>.</p><p>You can now <a class="link linktype-component" href="display-assets.html" title="Display assets">display DAM assets in the Content Editor</a>.</p></li></ol></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061">Walkthrough: Enabling the DAM connector in a local XM Cloud development environment</a></li><li><a href="#UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_section-idm1733377271310478">Prerequisites</a></li><li><a href="#idm45146578107328">Configure a DAM connection</a></li><li><a href="#idm45146578104096">Configure and enable the DAM connector</a></li><li><a href="#UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_section-idm1733379333556304">Configure CORS for DAM</a></li></ul></aside><article id="search-result-wrapper"><div class="search-container" style="display: none;"><h2>Search results</h2><ul class="searchresults"></ul><p class="noresults">No results found</p></div></article></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="enabling-the-cmp-connector-in-a-local-xm-cloud-development-environment.html#UUID-84c21bc3-2d19-1358-e8a9-32732858d640_section-idm93334620251844">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="walkthrough--enabling-the-dam-connector-in-a-local-xm-cloud-development-environment.html#UUID-c4747216-5a4e-b67b-1d1e-2cfa47a44061_section-idm1733377271310478">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023  </div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date"></span></div></div></footer></div></div></div></div></body></html>
