<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="Audience - do not use" content=""></meta><meta name="clubot" content=""></meta><meta name="data model" content=""></meta><meta name="DxP type - Do Not Use" content=""></meta><meta name="media_icon" content=""></meta><meta name="product" content="XM Cloud"></meta><meta name="Publishing target" content="Production"></meta><meta name="Ready for publishing - do not use" content=""></meta><meta name="role" content="developers"></meta><meta name="topic_tripane" content=""></meta><meta name="version" content=""></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
					function addSearch(){
					//not used with custom or elastic search
					}
				</script><title>Use a patch file to customize the Sitecore configuration</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/content-theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="/css/sitecore-custom-default-xmc.css?version=20230630"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js?version=20230630" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js?version=20230630" type="text/javascript"></script><script src="../js/html5-2.js?version=20230630" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="/js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="description" content="How to use patch files to add or change server configuration settings."></meta><meta name="keywords" content="Configuration"></meta><link rel="prev" href="work-with-items-as-resources.html#UUID-182882d4-cb3c-28b5-c316-58f904824d57_section-idm4660535930835233347843354824" title="Get a list of all items that exist in both the resource file and database"></link><link rel="next" href="use-a-patch-file-to-customize-the-sitecore-configuration.html#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch" title="Create a patch file"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script><script type="text/javascript">var privacypolicy = 'https://www.sitecore.com/trust/privacy-policy';
var consenttype = 'opt-out';
</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-72664331-1"></script><script type="text/javascript">const measurementId = 'UA-72664331-1';

						$(document).on('cookies.consented', () => {
							window.dataLayer = window.dataLayer || [];
							function gtag(){dataLayer.push(arguments)};

							gtag('js', new Date());
							gtag('config', measurementId);
						});
					</script><script type="text/javascript" src="../js/cookie-consent.js"></script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script><link href="//customer.cludo.com/assets/2063/10039/cludo-search.min.css" type="text/css" rel="stylesheet"></link></head><body class="theme1 colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://doc.sitecore.com/xmc/" target="_blank" rel="noopener"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="navbar-collapse collapse" id="navbar"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside xmlns:xinfo="http://ns.expertinfo.se/cms/xmlns/1.0" class="site-sidebar"><div class="site-sidebar-header"><a href="https://doc.sitecore.com/xmc/" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form id="search-form" class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="index-en.html">XM Cloud Documentation for Developers</a></li><li class="breadcrumb-link"><a href="xm-cloud-development.html">XM Cloud development</a></li><li class="breadcrumb-link"><a href="miscellaneous-development-tasks.html">Miscellaneous development tasks</a></li><li class="breadcrumb-node">Use a patch file to customize the Sitecore configuration</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="work-with-items-as-resources.html#UUID-182882d4-cb3c-28b5-c316-58f904824d57_section-idm4660535930835233347843354824">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="use-a-patch-file-to-customize-the-sitecore-configuration.html#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section taxonomy-audience---do-not-use-developer original-topic" data-origin-id="UUID-a401caf6-6482-8351-79a8-20e9ed335e88" data-permalink="use-a-patch-file-to-customize-the-sitecore-configuration.html" data-topic-level="1" data-relative-prefix="" data-time-modified="06/23/2023" data-publication-date="06/30/23" id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Use a patch file to customize the Sitecore configuration<span id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_UUID-a2441f7c-f3cf-b035-32d4-380ba98987a9"></span></h1></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>How to use patch files to add or change server configuration settings.</p></div></div></div></div><p>You use patch files to add or change configuration settings in the <code class="code">Sitecore.config</code> file. <span class="phrase">XM Cloud</span> merges the patch files with the <code class="code">Sitecore.config</code> file to create the configuration file that is used at runtime.</p><p>This topic describes how to:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><a class="link" href="use-a-patch-file-to-customize-the-sitecore-configuration.html#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch" title="Create a patch file"> Create a patch file</a></p></li><li class="listitem"><p><a class="link" href="use-a-patch-file-to-customize-the-sitecore-configuration.html#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_how_settings" title="Control how settings are applied"> Control how settings are applied</a></p></li><li class="listitem"><p><a class="link" href="use-a-patch-file-to-customize-the-sitecore-configuration.html#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_the_load" title="Control the load order of configuration files"> Control the load order of configuration files</a></p></li></ul></div><section dir="ltr" class="section internal accordion" data-origin-id="" data-publication-date="06/30/23" id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch_body" data-parent="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch"><div><div class="title"><h2 class="title" style="clear: both">Create a patch file</h2></div></div></a></div></div><div class="panel-body collapse" id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch_body"><p>To create a patch file to customize configuration settings:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Create a file in one of the two <a class="link linktype-component" href="configuration-layers.html" title="Configuration layers">customizable layers</a> in :</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>The Custom layer – you must place patch files that customize default <span class="phrase">XM Cloud</span> settings in a way that is independent of the system environment in the <code class="code">/App_Config/Include</code> folder, which belongs to the Custom layer.</p></li><li class="listitem"><p>The Environment layer – you must place patch files that configure <span class="phrase">XM Cloud</span> for a specific environment, such as QA or Development, in the <code class="code">/App_Config/Environment</code> folder, which belongs to the Environment layer.</p></li></ul></div><p>You can place the file either in the root of the folder or in a subfolder that you create within the folder.</p></li><li class="step"><p>Give the patch file a name ending with the extension <code class="code">.config</code>.</p></li><li class="step"><p>Start with this basic structure in the file:</p><pre class="programlisting">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;configuration&gt;
&lt;sitecore&gt;
&lt;/sitecore&gt;
&lt;/configuration&gt;
</pre></li><li class="step"><p>In the <code class="code">&lt;sitecore&gt;</code> section of the patch file, add the setting changes that you want to add to the configuration.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>You can only patch settings in the <code class="code">app_config/sitecore.config</code> file. Settings in other files such as the <code class="code">web.config</code> and <code class="code">app_config/layers.config</code> files cannot be patched. If you need to change the settings in these files, you must edit them directly.</p></div></li></ol></div></div></div></section><section dir="ltr" class="section internal accordion" data-origin-id="" data-publication-date="06/30/23" id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_how_settings"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_how_settings_body" data-parent="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_how_settings"><div><div class="title"><h2 class="title" style="clear: both">Control how settings are applied</h2></div></div></a></div></div><div class="panel-body collapse" id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_how_settings_body"><p>When <span class="phrase">XM Cloud</span> applies the changes from a patch file, it tries to match each element in the patch file to an element in the existing configuration using the combination of the element name and all the attributes of the element. If there is a match, <span class="phrase">XM Cloud</span> updates the existing element. If there is no match, <span class="phrase">XM Cloud</span> inserts a new element.</p><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>If a patch file element matches more than one element in the existing configuration, <span class="phrase">XM Cloud</span> applies the update to the first matching element that it finds. We therefore strongly recommend that you specify enough attributes of the element to uniquely identify it.</p></div><p>By default, <span class="phrase">XM Cloud</span> inserts new elements at the end of the configuration section that the elements belong to.</p><p>To control how <span class="phrase">XM Cloud</span> inserts elements:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Register the <code class="code">patch</code> and <code class="code">set</code> XML namespaces that enable you to use attributes to modify or add settings, by adding them to the <code class="code">&lt;configuration&gt;</code> setting:</p><pre class="programlisting">&lt;configuration xmlns:patch="http://www.sitecore.net/xmlconfig/" 
xmlns:set="http://www.sitecore.net/xmlconfig/set/"&gt;
</pre></li><li class="step"><p>Use a <code class="code">patch:</code> attribute to specify where the element is placed relative to existing elements, or to specify that it replaces or updates an existing element of the same name. You can use the following attributes:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">patch:before</code> – inserts the element before the specified element.</p></li><li class="listitem"><p><code class="code">patch:after</code> – inserts the element after the specified element.</p></li><li class="listitem"><p><code class="code">patch:attribute</code> – defines or replaces the specified attribute of the element. You can achieve the same effect using the <code class="code">set</code> namespace.</p></li><li class="listitem"><p><code class="code">patch:delete</code> – removes the specified element.</p></li><li class="listitem"><p><code class="code">patch:instead</code> – replaces the specified element.</p></li></ul></div><p>For example, to add a site named <code class="code">mysite</code> and place it before the existing site with the name <code class="code">website</code>, use the following syntax:</p><pre class="programlisting">&lt;configuration xmlns:patch="http://www.sitecore.net/xmlconfig/"&gt;
  &lt;sitecore&gt;
    &lt;sites&gt;
      &lt;site patch:before=”*[@name='website']” name=”mysite” ... /&gt;
    &lt;/sites&gt;
  &lt;/sitecore&gt;
&lt;/configuration&gt;
</pre></li></ol></div><div dir="ltr" class="note note"><h3 class="title">Note</h3><p>You can use <a class="link linktype-component" href="configuration-patch-file-examples.html" title="Configuration patch file examples">examples of patch files</a> to help you change the <span class="phrase">XM Cloud</span> configuration.</p></div></div></div></section><section dir="ltr" class="section internal accordion" data-origin-id="" data-publication-date="06/30/23" id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_the_load"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_the_load_body" data-parent="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_the_load"><div><div class="title"><h2 class="title" style="clear: both">Control the load order of configuration files</h2></div></div></a></div></div><div class="panel-body collapse" id="UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_the_load_body"><p>The order in which <span class="phrase">XM Cloud</span> loads configuration files is important because the changes that a file makes can be modified or overwritten by files that load later. If <span class="phrase">XM Cloud</span> finds the same configuration setting in multiple files, the last file to load overwrites the previous versions of the setting.</p><p>To control the sequence in which the configuration files load within a layer:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the /<code class="code">App_config/layers.config</code> file, add a <code class="code">&lt;loadOrder&gt;</code> setting to the layer's definition:</p><pre class="programlisting">&lt;layer name="Custom" includeFolder="/App_Config/Custom/"&gt;
&lt;loadOrder&gt;
&lt;/loadOrder&gt;
&lt;/layer&gt;
</pre></li><li class="step"><p>Add the file folders or individual files inside the <code class="code">&lt;loadOrder&gt;</code> section in the order you want them to load:</p><pre class="programlisting">&lt;loadOrder&gt;
&lt;add path="Folder23" type="Folder" /&gt;
&lt;add path="Folder9/sitespecific.config" type="File" /&gt;
&lt;add path="Folder1" type="Folder" /&gt;
&lt;/loadOrder&gt;
</pre></li></ol></div><p>When <span class="phrase">XM Cloud</span> encounters a <code class="code">&lt;loadOrder&gt;</code> setting, it loads the configuration files in this order:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Folders and files that are specified in the <code class="code">&lt;loadOrder&gt;</code> section load first, in the order they are listed. In the previous example, the files in the <span class="italic">Folder23</span> folder load first, then the <code class="code">sitespecific.config</code> file, and then the files in the <span class="italic">Folder1</span> folder<code class="code">.</code></p></li><li class="step"><p>Folders and files that are <span class="italic">not</span> specified in the <code class="code">&lt;loadOrder&gt;</code> section load second. They load in alphabetical order. Files that are placed in the root of a folder load before files within subfolders.</p></li></ol></div></div></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2">Use a patch file to customize the Sitecore configuration</a></li><li><a href="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch">Create a patch file</a></li><li><a href="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_how_settings">Control how settings are applied</a></li><li><a href="#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Control_the_load">Control the load order of configuration files</a></li></ul></aside></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="work-with-items-as-resources.html#UUID-182882d4-cb3c-28b5-c316-58f904824d57_section-idm4660535930835233347843354824">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="use-a-patch-file-to-customize-the-sitecore-configuration.html#UUID-93caf810-0c58-7fe9-21bb-76461faca4c2_id__Create_a_patch">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023 Sitecore </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">06/23/2023</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date">06/30/23</span></div></div></footer></div></div></div></div><script type="text/javascript" src="//customer.cludo.com/scripts/bundles/search-script.min.js"></script><script>
			var CludoSearch;
			(function () {
			var cludoSettings = {
			customerId: 2063,
			engineId: 12826,
			language: 'en',
			searchInputs: ["search-form","cludo-search-content-form","cludo-search-mobile-form"],
			hideSearchFilters: true,
			type: 'standardOverlay',
			facets: ["Category", "ProductVer", "Product", "Version"],
			useStandardSearchTemplate: false,
			customerTemplate: "OverlayCopy",
			searchApiUrl: 'https://api-eu1.cludo.com/api/v3'
			};
			CludoSearch= new Cludo(cludoSettings);
			CludoSearch.init();
			})();
		</script><!-- www.Cludo.com Search body init script start --></body></html>
