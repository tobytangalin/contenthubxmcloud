<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en" dir="ltr"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="Audience - do not use" content=""></meta><meta name="clubot" content=""></meta><meta name="data model" content=""></meta><meta name="DxP type - Do Not Use" content=""></meta><meta name="media_icon" content=""></meta><meta name="product" content="XM Cloud"></meta><meta name="Publishing target" content="Production"></meta><meta name="Ready for publishing - do not use" content=""></meta><meta name="role" content="developers"></meta><meta name="topic_tripane" content=""></meta><meta name="version" content=""></meta><meta name="tocstandalone" content="yes"></meta><meta name="theme" content="1"></meta><meta name="search.placeholder" content="Search"></meta><meta name="search.results" content="Search results"></meta><meta name="no.search.results" content="No results found"></meta><script type="text/javascript">
var theme = '1';

			
			window.versionsfile = '';


			window.indexDict = new Array();
			window.store = {};
			window.portalLanguage = 'en';
			window.enterKey = 'select';
			
			
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
					var anchoroption = true;
				var instantsearch_minlength = 1;
						
			var useanchorlinks = false;
			
					function addSearch(){
					//not used with custom or elastic search
					}
				</script><title>Troubleshooting JSS Next.js apps</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/theme1-colors.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/content-theme1.css?version=20230630"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style-modern-tables.css"></link><link rel="stylesheet" type="text/css" href="../css/graphical-lists.css"></link><link rel="stylesheet" type="text/css" href="/css/sitecore-custom-default-xmc.css?version=20230630"></link><script src="../js/jquery-3/jquery-3.4.1.min.js" type="text/javascript"></script><script src="../js/jquery-migrate-3.0.1.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.smartmenus.js" type="text/javascript"></script><script src="js/toc.js?version=20230630" type="text/javascript"></script><script src="../js/create-toc.js" type="text/javascript"></script><script src="../js/html5-2-mp-common.js?version=20230630" type="text/javascript"></script><script src="../js/html5-2.js?version=20230630" type="text/javascript"></script><script src="../js/checklist.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><script src="/js/layout-custom-script.js" type="text/javascript"></script><meta xmlns:xhtml="http://www.w3.org/1999/xhtml" name="generator" content="Paligo"></meta><meta name="description" content="Describes how to avoid errors and gives some workarounds."></meta><link rel="prev" href="api-reference.html" title="API reference"></link><link rel="next" href="troubleshooting-jss-next-js-apps.html#idm45599351005984" title="Server-side JavaScript errors"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.css"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent/3.1.1/cookieconsent.min.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/3.0.1/js.cookie.min.js"></script><script type="text/javascript">var privacypolicy = 'https://www.sitecore.com/trust/privacy-policy';
var consenttype = 'opt-out';
</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-72664331-1"></script><script type="text/javascript">const measurementId = 'UA-72664331-1';

						$(document).on('cookies.consented', () => {
							window.dataLayer = window.dataLayer || [];
							function gtag(){dataLayer.push(arguments)};

							gtag('js', new Date());
							gtag('config', measurementId);
						});
					</script><script type="text/javascript" src="../js/cookie-consent.js"></script><script type="text/javascript">
				$(document).ready(function () {
				$(".mediaobject img").addClass('materialboxed');
				//Exclude images with links
				$(".mediaobject a img").removeClass('materialboxed');
				if (!document.documentMode) {
				$('.materialboxed').materialbox();
				}});
			</script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/googlecode.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {

				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script><link href="//customer.cludo.com/assets/2063/10039/cludo-search.min.css" type="text/css" rel="stylesheet"></link></head><body class="theme1 colored-top page-toc current-toc-section-focus" data-spy="scroll" data-target=".section-nav-container" data-offset="100" data-link-prefix=""><style type="text/css">
            div.skipnav {
            }
            div.skipnav a {
                position: fixed;
                left: -10000px;
                top: 1.5em;
                width: 1px;
                height: 1px;
                overflow: hidden;
            }
            div.skipnav a:focus, div.skipnav a:active, div.skipnav a:hover {
                background: white;
                color: black;
                box-shadow: 5px 5px 5px 0px rgba(0,0,0,0.5);
                position: fixed;
                left: 2em;
                top: 1.5em;
                width: auto;
                height: auto;
                overflow: visible;
                text-decoration: underline;
                z-index: 99999; /* has to be higher than the side panel */
    }
          </style><div class="skipnav"><a href="#content-wrapper">Skip to main content</a></div><header class="site-header"><nav class="site-header-navbar navbar navbar-fixed-top"><div class="navbar-container"><div class="navbar-header"><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><div id="logotype-container" class="pull-left"><a class="navbar-brand" href="https://doc.sitecore.com/xmc/" target="_blank" rel="noopener"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div></div><div class="navbar-collapse collapse" id="navbar"></div></div></nav></header><div class="site-body"><div class="site-body-container"><div class="site-body-row"><aside xmlns:xinfo="http://ns.expertinfo.se/cms/xmlns/1.0" class="site-sidebar"><div class="site-sidebar-header"><a href="https://doc.sitecore.com/xmc/" target="_blank"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype" class="logo"></img></a></div><form id="search-form" class="site-sidebar-search" autocomplete="off"><input type="text" class="form-control search-field" placeholder="Search" id="aa-search-input"></input></form><div id="toc-standalone-placeholder"></div></aside><div class="site-content"><div class="toolbar"><div class="toolbar-tools"><div id="navbar" class="navbar-collapse collapse"></div><div class="tool-print"><i class="fa fa-print" aria-hidden="true">print</i></div><div class="tool-search"><i class="fa fa-search" aria-hidden="true"></i></div><button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".site-sidebar" aria-expanded="false" aria-controls="navbar"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><a href="index-en.html">XM Cloud Documentation for Developers</a></li><li class="breadcrumb-link"><a href="sitecore-javascript-rendering-sdks--jss-.html">Sitecore JavaScript Rendering SDKs (JSS)</a></li><li class="breadcrumb-link"><a href="sitecore-javascript-rendering-sdk--jss--for-next-js.html">Sitecore JavaScript Rendering SDK (JSS) for Next.js</a></li><li class="breadcrumb-node">Troubleshooting JSS Next.js apps</li></ul></div></div><main><div id="top-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="api-reference.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="troubleshooting-jss-next-js-apps.html#idm45599351005984">Next</a></li></ul></div><article class="topic content-container" id="content-wrapper"><div id="topic-content" class="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-8c13e1cb-f882-b9e9-128c-dfa2118e3513" data-permalink="troubleshooting-jss-next-js-apps.html" data-topic-level="1" data-relative-prefix="" data-time-modified="06/26/2023" data-publication-date="06/30/23" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7"><div class="titlepage"><div><div class="title"><h1 class="title" style="clear: both">Troubleshooting JSS Next.js apps<span id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_UUID-b6b7998e-9b00-d6b5-ed04-82b92e9e201a"></span></h1></div><div><div class="abstract"><div class="abstract-title">Abstract</div><p>Describes how to avoid errors and gives some workarounds.</p></div></div></div></div><p>To help you debug your JSS application, we recommend you <a class="link linktype-component" href="debug-logging-in-jss-apps.html" title="Debug logging in JSS apps">use the debug logging utilities provided by JSS</a>.</p><p>You can prevent most errors by doing the following:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>Verify that all environment variables used by the app have values. The sample app searches for environment variables in the following order:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p><code class="code">scjssconfig.json</code>.</p></li><li class="listitem"><p><code class="code">.env</code>.</p></li><li class="listitem"><p><code class="code">.env.local</code> (for local environments only).</p></li></ol></div></li><li class="listitem"><p>If multiple files contain a definition of the same variable, the application uses the last value it finds.</p><p>Refer to the sample <code class="code">.env</code> file for variable names and descriptions.</p></li><li class="listitem"><p>Check that you have correctly <a class="link linktype-component" href="create-a-sitecore-api-key.html" title="Create a Sitecore API key">set up the API key</a>.</p></li><li class="listitem"><p>Check that your project's site definition and app definition are correct in your Sitecore configuration. Refer to the <a class="link" href="https://github.com/Sitecore/jss/blob/master/packages/create-sitecore-jss/src/templates/nextjs/sitecore/config/%7B%7BappName%7D%7D.config" target="_blank" rel="noopener">Sitecore app configuration</a> for the list of required properties.</p></li><li class="listitem"><p>Verify that you have set the <a class="link linktype-component" href="walkthrough--connecting-a-next-js-jss-app-to-sitecore-editors.html" title="Walkthrough: Connecting a Next.js JSS app to Sitecore editors">JSS Editing Secret</a>. The <code class="code">JSS_EDITING_SECRET</code> value used by your Next.js app must match the value used by your Sitecore instance.</p></li><li class="listitem"><p>Verify that the GraphQL endpoint is correct in <code class="code">package.json</code> and the Sitecore app configuration. Try opening the GraphQL IDE in a browser, using values from your config (<code class="code">&lt;sitecore hostname + graphQL endpoint&gt;/ui?sc_apikey=&lt;api key&gt;</code>) to make sure the endpoint is working.</p></li></ul></div><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599351005984"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599351005984_body" data-parent="#idm45599351005984"><div><div class="title"><h2 class="title" style="clear: both">Server-side JavaScript errors</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599351005984_body"><p>If you encounter unexpected JavaScript errors during the <code class="code">npm install</code> or <code class="code">build</code> steps, especially errors that other team members cannot reproduce, check the Node versions and npm being used. From a terminal, run:</p><pre class="programlisting shell" data-language="shell">node -v
npm -v</pre><p>We test JSS using the <span class="emphasis"><em>Long Term Support (LTS) Node version</em></span>. These are typically one major version behind the latest official Node version.</p><p>The Node/npm version used by your CI/Production environments might differ from that of your local environment. When a project configuration does not require a specific Node/npm version in <code class="code">package.json</code>, deployment agents commonly build using the most recent or an environment-specific default version.</p><p>If you need to swap between multiple Node versions on your local environment for testing, you can use third-party packages like <a class="link" href="https://github.com/tj/n" target="_blank" rel="noopener">n</a> or <a class="link" href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener">nvm</a>.</p></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599351005584"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599351005584_body" data-parent="#idm45599351005584"><div><div class="title"><h2 class="title" style="clear: both">Errors regarding SSL certificates</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599351005584_body"><p>If you are working with a local Sitecore instance using a privately signed certificate, you might experience the following error:</p><pre class="programlisting plaintext" data-language="plaintext" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_programlisting-idm4547609878628833326786042819">Error: unable to verify the first certificate
Error: UNABLE TO VERIFY LEAF SIGNATURE
UnauthorizedError: invalid signature</pre><p>To resolve this error, <a class="link linktype-component" href="walkthrough--configuring-sitecore-ca-certificates-for-node-js.html" title="Walkthrough: Configuring Sitecore CA certificates for Node.js">configure Sitecore CA certificates for Node.js</a>.</p></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599350999024"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599350999024_body" data-parent="#idm45599350999024"><div><div class="title"><h2 class="title" style="clear: both">Errors deploying a JSS app locally</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599350999024_body"><p>If the import role does not have the correct permissions, you might experience the following error:</p><pre class="programlisting plaintext" data-language="plaintext">IMPORT ERROR(S) OCCURRED!
Exception thrown while importing JSS app
Exception: Sitecore.Exceptions.AccessDeniedException
Message: AddFromTemplate - Add access required</pre><p>Refer to <a class="link" href="https://kb.sitecore.net/articles/650791" target="_blank" rel="noopener">Errors when importing JSS application on Azure</a> for the solution.</p></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599350994912"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599350994912_body" data-parent="#idm45599350994912"><div><div class="title"><h2 class="title" style="clear: both">Data-fetching issues</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599350994912_body"><p>Building and rendering a JSS Next.js app depends on successfully fetching data using GraphQL. The most common cause of failed builds and apps that cannot render pages is an issue with the data-fetching process.</p><p>You can use the GraphQL IDE at <code class="code">&lt;sitecore hostname + graphQL endpoint&gt;/ui?sc_apikey=&lt;api key&gt;</code> to diagnose issues with the data-fetching process.</p><p>To support static generation functionality, the Next.js JSS app <a class="link linktype-component" href="preparing-the-list-of-pages-for-static-generation-or-export-in-jss-next-js-apps.html" title="Preparing the list of pages for static generation or export in JSS Next.js apps">uses a GraphQL query to retrieve Sitecore paths</a>. Try running the following query in the GraphQL IDE:</p><pre class="programlisting graphql" data-language="graphql"># YOUR_PATH should be the ID of your site root (home page) in lower-case, with dashes removed.
# YOUR_LANGUAGE should be your default language, as defined in package.json

query{
  search(where: {
    AND:[
      {
      name:"_path",
      value:"YOUR_PATH"
      },
      {
      name:"_language",
      value:"YOUR_LANGUAGE"
      },
      {
      name:"_hasLayout",
      value :"true"
      }
    ]
  })
  { 
    total
    results {
        url {
          path
        }
      }
  }"
}</pre><p>If you do not see the expected results, try the following steps:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="guilabel">Sitecore Control Panel</span>, use <span class="guilabel">Populate Solr Managed Schema</span> to populate the Solr Schema.</p></li><li class="step"><p>In the <span class="guilabel">Sitecore Control Panel</span>, use <span class="guilabel">Indexing Manager</span> to rebuild indexes.</p></li><li class="step"><p>Check that your content items have versions for the language you are querying.</p></li></ol></div></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599350991952"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599350991952_body" data-parent="#idm45599350991952"><div><div class="title"><h2 class="title" style="clear: both">Error when trying to edit items in Sitecore</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599350991952_body"><p>After creating a new user in the Sitecore Editor Role, attempting to edit the JSS app items in Sitecore might warn that the user does not have read access rights.</p><p>The workaround is to set <span class="emphasis"><em>Workflow State Write</em></span> for the <span class="emphasis"><em>System/Workflows/JSS development workflow</em></span> item manually, enabling the Published state, which is final, to be editable. It allows the user to create a new version of an item for editing using the <span class="guilabel">Lock and Edit</span> option.</p></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4547610173150433323511755185"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4547610173150433323511755185_body" data-parent="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4547610173150433323511755185"><div><div class="title"><h2 class="title" style="clear: both">Rendering host timeout issue in Experience Editor</h2></div></div></a></div></div><div class="panel-body collapse" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4547610173150433323511755185_body"><p>When opening a JSS app configured to use the HTTP rendering engine (such as a Next.js app) for the first time using the Experience Editor, you might get a timeout error from the rendering host with the message <code class="code">The operation has timed out</code>. In the logs, you can see the following:</p><pre class="programlisting plaintext" data-language="plaintext" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_programlisting-idm463405344594403332351664898">10292 10:51:16 ERROR [JSS] Error occurred during POST to remote rendering host: `http://localhost:3000/api/editing/render`
10292 10:51:16 ERROR The operation has timed out
Exception: System.Net.WebException
Message: The operation has timed out
Source: System
at System.Net.WebClient.UploadDataInternal(Uri address, String method, Byte[] data, WebRequest&amp; request)
at System.Net.WebClient.UploadString(Uri address, String method, String data)
at Sitecore.JavaScriptServices.ViewEngine.Http.RenderEngine.Invoke[T](String moduleName, String functionName, Object[] functionArgs)</pre><p>To resolve the issue, edit the <code class="code">\App_Config\Sitecore\JavaScriptServices\Sitecore.JavaScriptServices.ViewEngine.Http.config</code> file to increase the value of the <code class="code">RequestTimeoutMs</code> setting. For example:</p><pre class="programlisting xml" data-language="xml" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_programlisting-idm4547610246040033323512259422">&lt;!-- Specifies the maximum duration, in milliseconds, that your .NET code should wait for requests to the HTTP renderer (for example, the `EndpointUrl` setting) to respond. --&gt;
&lt;RequestTimeoutMs&gt;10000&lt;/RequestTimeoutMs&gt;</pre></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599350981520"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599350981520_body" data-parent="#idm45599350981520"><div><div class="title"><h2 class="title" style="clear: both">GraphQL query error when trying to start the Next.js app using a Sitecore instance with SXA</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599350981520_body"><p>If you have an SXA integration with a Headless Site Collection and you deploy Next.js items in it, you might encounter a GraphQL query error when trying to start the Next.js app in production mode:</p><p><code class="code">Error: Valid value for rootItemId not provided and failed to auto-resolve app root item.</code></p><p>This error occurs because the Next.js app and Next.js app items deployed into the Headless Site Collection reference different templates, causing the query to fail. This error only occurs if you use version 20.x or older of JSS.</p><p>To prevent the error, define a <code class="code">rootItemId</code> for your instances of GraphQL services as follows:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p><code class="code">/src/lib/sitemap-fetcher/plugins/graphql-sitemap-service.ts</code>.</p></li><li class="listitem"><p><code class="code">/src/lib/dictionary-service-factory.ts</code>.</p></li></ul></div><p>Alternatively, update the JSS NPM packages in your application to version 21 or later. If you are encountering the error while running the Next.js application in production mode in your local development environment, you also have to upgrade the Headless Services and SXA modules in your local development environment.</p></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599350974784"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599350974784_body" data-parent="#idm45599350974784"><div><div class="title"><h2 class="title" style="clear: both">Errors when generating GraphQL introspection data</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599350974784_body"><p>If the GraphQL schema changes, you must regenerate GraphQL introspection data.</p><p>In the sample app, you regenerate introspection data using the <code class="code">jss graphql:update</code> command.</p><div dir="ltr" class="note"><h3 class="title">Note</h3><p>The script invoked internally by this command depends on having the <code class="code">scjssconfig.json</code> file populated. To generate the file, you must <a class="link linktype-component" href="walkthrough--connecting-a-code-first-jss-next-js-application-to-xm-cloud.html" title="Walkthrough: Connecting a code-first JSS Next.js application to XM Cloud">connect your JSS app to Sitecore</a>.</p></div></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="idm45599350969504"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#idm45599350969504_body" data-parent="#idm45599350969504"><div><div class="title"><h2 class="title" style="clear: both">Vercel is unable to show data from a local Sitecore environment</h2></div></div></a></div></div><div class="panel-body collapse" id="idm45599350969504_body"><p>If you are using <a class="link" href="https://ngrok.com/" target="_blank" rel="noopener">ngrok</a> to expose your local Sitecore endpoint to Vercel, verify that you are using the <code class="code">host-header</code> flag. For example,</p><pre class="programlisting shell" data-language="shell">ngrok http -host-header=rewrite &lt;your-local-url&gt;</pre></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4637093843315232936271572889"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4637093843315232936271572889_body" data-parent="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4637093843315232936271572889"><div><div class="title"><h2 class="title" style="clear: both">Sitecore images do not load on localhost</h2></div></div></a></div></div><div class="panel-body collapse" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4637093843315232936271572889_body"><p>If your Sitecore images do not load when using a <code class="code">localhost</code> domain for the application, it is likely because you are trying to request images through the Next.js proxy, resulting in the error: <code class="code">500 - Invalid URI: The hostname could not be parsed</code>.</p><p>To load Sitecore images on a <code class="code">localhost</code> domain, you must set the <code class="code">IncludeServerUrlInMediaUrls</code> attribute of the contents resolver to <code class="code">true</code> to include the Sitecore URL in the image URL. For example:</p><pre class="programlisting xml" data-language="xml" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_programlisting-idm4637093726169632936279312133">&lt;config name="jss"&gt;
  &lt;rendering&gt;
     &lt;renderingContentsResolver&gt;
       &lt;IncludeServerUrlInMediaUrls&gt;true&lt;/IncludeServerUrlInMediaUrls&gt;
     &lt;/renderingContentsResolver&gt;
   &lt;/rendering&gt;
 &lt;/config&gt;</pre><p>With this configuration in place, the application requests the images directly from Sitecore.</p><div dir="ltr" class="important"><h3 class="title">Important</h3><p>In production environments, you must change the value of the <code class="code">IncludeServerUrlInMediaUrls</code> attribute to <code class="code">false</code>.</p></div></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648767194"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648767194_body" data-parent="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648767194"><div><div class="title"><h2 class="title" style="clear: both">Experience Editor integration breaks because of a protocol mismatch error</h2></div></div></a></div></div><div class="panel-body collapse" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648767194_body"><p>When hosting the Next.js application on platforms other than Vercel, if the integration with Experience Editor stops working because of a protocol mismatch error, <a class="link linktype-component" href="override-default-protocols-using-the-editingrendermiddleware-in-next-js-jss-apps.html" title="Override default protocols using the EditingRenderMiddleware in Next.js JSS apps">override default protocols using the EditingRenderMiddleware</a>.</p></div></div></section><section dir="ltr" class="section accordion" data-origin-id="" data-publication-date="06/30/23" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648734780"><div class="accordion-icon"></div><div class="panel panel-default"><div class="panel-heading"><div class="titlepage"><a data-toggle="collapse" href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648734780_body" data-parent="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648734780"><div><div class="title"><h2 class="title" style="clear: both">Editing data cache miss and intermittent 500 errors in Experience Editor</h2></div></div></a></div></div><div class="panel-body collapse" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648734780_body"><p>When hosting the Next.js application on platforms other than Vercel, you might see cache miss errors in the Node.js environment. For example:</p><pre class="programlisting plaintext" data-language="plaintext" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_programlisting-idm1401672824367393">2022-10-12 16:27:42: Error: Unable to get editing data for preview {"key":"0518d8c6-b7ca-4c73-86c2-a29d971ebeab-2xqnbg0jpx","serverUrl":"https://your-url.com"}
    at SitecorePagePropsFactory.createPreviewModePage (/opt/web/.next/server/chunks/9694.js:1190:17)
    at runMicrotasks (&lt;anonymous&gt;)    at processTicksAndRejections (internal/process/task_queues.js:95:5)
    at async SitecorePagePropsFactory.create (/opt/web/.next/server/chunks/9694.js:1174:14)
    at async getServerSideProps (/opt/web/.next/server/pages/[[...path]].js:1952:17)
    at async Object.renderToHTML (/opt/web/.next/node_modules/next/dist/server/render.js:555:20)
    at async doRender (/opt/web/.next/node_modules/next/dist/server/base-server.js:1406:38)
    at async /opt/web/.next/node_modules/next/dist/server/base-server.js:1501:28
    at async /opt/web/.next/node_modules/next/dist/server/response-cache.js:63:36</pre><p>The issue causes a 500 error in the Content Management instance, such as:</p><pre class="programlisting plaintext" data-language="plaintext" id="UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_programlisting-idm1403345648734784">3112 16:27:42 ERROR The remote server returned an error: (500) Internal Server Error.
Exception: System.Net.WebException
Message: The remote server returned an error: (500) Internal Server Error.
Source: System
at System.Net.WebClient.UploadDataInternal(Uri address, String method, Byte[] data, WebRequest&amp; request)
at System.Net.WebClient.UploadString(Uri address, String method, String data)
at Sitecore.JavaScriptServices.ViewEngine.Http.RenderEngine.Invoke[T](String moduleName, String functionName, Object[] functionArgs)</pre><p>Such errors are caused by the instability of the temporary directory used by the editing data cache. To resolve the errors, <a class="link linktype-component" href="override-the-default-directory-used-by-the-disk-based-editing-cache-implementation.html" title="Override the default directory used by the disk-based editing cache implementation">override the default directory used by the disk-based editing cache implementation</a>.</p></div></div></section></section><div class="footer-content"><div class="glossary-definitions"></div></div><footer></footer></div></article><aside class="section-nav-container"><ul class="section-nav nav"><li><a href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7">Troubleshooting JSS Next.js apps</a></li><li><a href="#idm45599351005984">Server-side JavaScript errors</a></li><li><a href="#idm45599351005584">Errors regarding SSL certificates</a></li><li><a href="#idm45599350999024">Errors deploying a JSS app locally</a></li><li><a href="#idm45599350994912">Data-fetching issues</a></li><li><a href="#idm45599350991952">Error when trying to edit items in Sitecore</a></li><li><a href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4547610173150433323511755185">Rendering host timeout issue in Experience Editor</a></li><li><a href="#idm45599350981520">GraphQL query error when trying to start the Next.js app using a Sitecore instance with SXA</a></li><li><a href="#idm45599350974784">Errors when generating GraphQL introspection data</a></li><li><a href="#idm45599350969504">Vercel is unable to show data from a local Sitecore environment</a></li><li><a href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm4637093843315232936271572889">Sitecore images do not load on localhost</a></li><li><a href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648767194">Experience Editor integration breaks because of a protocol mismatch error</a></li><li><a href="#UUID-55f5e737-e192-9cad-4b97-a7b611bfc3f7_section-idm1403345648734780">Editing data cache miss and intermittent 500 errors in Experience Editor</a></li></ul></aside></main><div id="bottom-pager"><ul class="pager"><li class="previous"><a accesskey="p" class="prev pull-left prev visible-lg visible-md" id="header-navigation-prev" href="api-reference.html">Prev</a></li><li class="next"><a accesskey="n" class="pull-right next visible-lg visible-md" id="header-navigation-next" href="troubleshooting-jss-next-js-apps.html#idm45599351005984">Next</a></li></ul></div><footer class="site-footer"><div class="inner"><div class="copyright"> © 2023 Sitecore </div><div class="date-modified"><span class="date-modified-text">Last modified: </span><span class="formatted-date">06/26/2023</span></div><div class="publication-date"><span class="publication-date-text">Publication date</span><span class="pubdate-delimiter">: </span><span class="formatted-date">06/30/23</span></div></div></footer></div></div></div></div><script type="text/javascript" src="//customer.cludo.com/scripts/bundles/search-script.min.js"></script><script>
			var CludoSearch;
			(function () {
			var cludoSettings = {
			customerId: 2063,
			engineId: 12826,
			language: 'en',
			searchInputs: ["search-form","cludo-search-content-form","cludo-search-mobile-form"],
			hideSearchFilters: true,
			type: 'standardOverlay',
			facets: ["Category", "ProductVer", "Product", "Version"],
			useStandardSearchTemplate: false,
			customerTemplate: "OverlayCopy",
			searchApiUrl: 'https://api-eu1.cludo.com/api/v3'
			};
			CludoSearch= new Cludo(cludoSettings);
			CludoSearch.init();
			})();
		</script><!-- www.Cludo.com Search body init script start --></body></html>
